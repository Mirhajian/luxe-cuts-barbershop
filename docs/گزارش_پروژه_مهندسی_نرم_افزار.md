# گزارش پروژه مهندسی نرم‌افزار
## سیستم مدیریت آرایشگاه لوکس کاتز

---

**نام درس:** مهندسی نرم‌افزار  
**موضوع:** مدل‌سازی سیستم نرم‌افزاری با استفاده از UML  
**تاریخ:** دی ۱۴۰۳

---

# فصل ۱: معرفی سیستم

## ۱.۱ شرح کامل سیستم

### ۱.۱.۱ معرفی
سیستم مدیریت آرایشگاه لوکس کاتز یک نرم‌افزار تحت وب است که برای مدیریت جامع یک آرایشگاه مردانه طراحی شده است. این سیستم امکان رزرو آنلاین نوبت، مدیریت خدمات، مدیریت پرسنل، و ارتباط با مشتریان را فراهم می‌کند.

### ۱.۱.۲ اهداف سیستم
- **تسهیل رزرو نوبت**: مشتریان می‌توانند بدون نیاز به تماس تلفنی، نوبت خود را آنلاین رزرو کنند
- **مدیریت منابع**: مدیریت بهینه زمان‌بندی آرایشگران و خدمات
- **افزایش رضایت مشتری**: ارائه تجربه کاربری مدرن و راحت
- **گزارش‌دهی**: امکان مشاهده آمار نوبت‌ها و درآمد

### ۱.۱.۳ ویژگی‌های کلیدی

| ویژگی | توضیح |
|-------|-------|
| رزرو آنلاین | رزرو نوبت با انتخاب خدمت، آرایشگر، تاریخ و ساعت |
| کاتالوگ خدمات | نمایش لیست خدمات با قیمت و مدت زمان |
| پروفایل آرایشگران | معرفی تیم با تخصص‌ها و سوابق |
| مدیریت نوبت‌ها | مشاهده، تأیید، و لغو نوبت‌ها |
| ذخیره‌سازی محلی | استفاده از IndexedDB برای ذخیره داده‌ها |

---

## ۱.۲ نیازهای عملکردی و غیرعملکردی

### ۱.۲.۱ نیازهای عملکردی (Functional Requirements)

| شماره | نیاز عملکردی | توضیح |
|-------|-------------|-------|
| FR-01 | رزرو نوبت | مشتری باید بتواند با وارد کردن اطلاعات شخصی، خدمت، آرایشگر، تاریخ و ساعت، نوبت رزرو کند |
| FR-02 | مشاهده خدمات | کاربر باید بتواند لیست کامل خدمات با قیمت و مدت زمان را مشاهده کند |
| FR-03 | مشاهده آرایشگران | کاربر باید بتواند پروفایل آرایشگران شامل نام، تخصص و سابقه را ببیند |
| FR-04 | لغو نوبت | مشتری یا مدیر باید بتواند نوبت رزرو شده را لغو کند |
| FR-05 | تأیید نوبت | سیستم باید پس از رزرو موفق، پیام تأیید نمایش دهد |
| FR-06 | افزودن خدمت جدید | مدیر باید بتواند خدمت جدید با مشخصات کامل اضافه کند |
| FR-07 | افزودن آرایشگر | مدیر باید بتواند آرایشگر جدید به سیستم اضافه کند |
| FR-08 | جستجوی خدمات | کاربر باید بتواند خدمات را بر اساس نام جستجو کند |
| FR-09 | فیلتر بر اساس دسته‌بندی | کاربر باید بتواند خدمات را بر اساس دسته‌بندی فیلتر کند |
| FR-10 | مشاهده اطلاعات تماس | کاربر باید بتواند آدرس، ساعات کاری و شماره تماس را ببیند |

### ۱.۲.۲ نیازهای غیرعملکردی (Non-Functional Requirements)

| شماره | نیاز غیرعملکردی | نوع | توضیح |
|-------|----------------|-----|-------|
| NFR-01 | کارایی | Performance | صفحات باید در کمتر از ۳ ثانیه بارگذاری شوند |
| NFR-02 | قابلیت استفاده | Usability | رابط کاربری باید ساده و بدون نیاز به آموزش قابل استفاده باشد |
| NFR-03 | پاسخ‌گویی | Responsiveness | سیستم باید در تمام اندازه صفحه‌نمایش‌ها (موبایل، تبلت، دسکتاپ) به خوبی کار کند |
| NFR-04 | دسترس‌پذیری | Availability | سیستم باید ۲۴/۷ در دسترس باشد |
| NFR-05 | ماندگاری داده | Persistence | داده‌ها باید پس از بستن مرورگر حفظ شوند |
| NFR-06 | امنیت | Security | اطلاعات تماس مشتریان باید به صورت امن ذخیره شود |
| NFR-07 | قابلیت نگهداری | Maintainability | کد باید ماژولار و قابل توسعه باشد |
| NFR-08 | سازگاری | Compatibility | سیستم باید با مرورگرهای اصلی (Chrome, Firefox, Safari) سازگار باشد |

---

## ۱.۳ ذینفعان و Actors

### ۱.۳.۱ ذینفعان (Stakeholders)

| ذینفع | نقش | علاقه‌مندی |
|-------|-----|-----------|
| صاحب آرایشگاه | مالک کسب‌وکار | افزایش درآمد، بهبود مدیریت |
| مشتریان | کاربران نهایی | رزرو آسان، تجربه کاربری خوب |
| آرایشگران | کارکنان | مدیریت بهتر برنامه کاری |
| مدیر سیستم | IT Admin | نگهداری و به‌روزرسانی سیستم |
| توسعه‌دهندگان | تیم فنی | قابلیت توسعه و نگهداری کد |

### ۱.۳.۲ Actors (بازیگران)

| Actor | توضیح | نوع |
|-------|-------|-----|
| **مشتری (Customer)** | فردی که می‌خواهد نوبت رزرو کند یا اطلاعات آرایشگاه را ببیند | Primary |
| **مدیر (Admin)** | فردی که خدمات و آرایشگران را مدیریت می‌کند | Primary |
| **آرایشگر (Barber)** | فردی که برنامه کاری و نوبت‌های خود را مشاهده می‌کند | Primary |
| **سیستم پایگاه داده (Database)** | IndexedDB برای ذخیره و بازیابی داده‌ها | Secondary |
| **مرورگر (Browser)** | محیط اجرای برنامه | Secondary |

---

## ۱.۴ سناریوهای کاربری (قالب Cockburn)

### ۱.۴.۱ سناریو ۱: رزرو نوبت توسط مشتری

| عنصر | توضیح |
|------|-------|
| **نام Use Case** | رزرو نوبت (Book Appointment) |
| **Actor اصلی** | مشتری |
| **ذینفعان و علایق** | مشتری: رزرو سریع و آسان نوبت / آرایشگاه: ثبت دقیق نوبت‌ها |
| **پیش‌شرط** | سیستم در دسترس است و خدمات و آرایشگران در پایگاه داده موجود هستند |
| **پس‌شرط موفق** | نوبت در پایگاه داده ذخیره شده و پیام تأیید نمایش داده می‌شود |

**سناریو اصلی (Main Success Scenario):**

| مرحله | Actor | سیستم |
|-------|-------|-------|
| ۱ | مشتری وارد صفحه رزرو می‌شود | صفحه فرم رزرو نمایش داده می‌شود |
| ۲ | مشتری نام و نام خانوادگی را وارد می‌کند | فیلد اعتبارسنجی می‌شود |
| ۳ | مشتری ایمیل و شماره موبایل را وارد می‌کند | فیلدها اعتبارسنجی می‌شوند |
| ۴ | مشتری خدمت مورد نظر را انتخاب می‌کند | لیست خدمات با قیمت نمایش داده می‌شود |
| ۵ | مشتری آرایشگر را انتخاب می‌کند | لیست آرایشگران نمایش داده می‌شود |
| ۶ | مشتری تاریخ را انتخاب می‌کند | تقویم با تاریخ‌های معتبر نمایش داده می‌شود |
| ۷ | مشتری ساعت را انتخاب می‌کند | ساعت‌های خالی نمایش داده می‌شوند |
| ۸ | مشتری دکمه «تأیید و رزرو» را می‌زند | - |
| ۹ | - | سیستم نوبت را در IndexedDB ذخیره می‌کند |
| ۱۰ | - | پیام «نوبت شما با موفقیت ثبت شد» نمایش داده می‌شود |

**سناریوهای جایگزین (Alternative Scenarios):**

| شماره | شرط | اقدام |
|-------|-----|-------|
| 4a | مشتری خدمتی انتخاب نمی‌کند | دکمه رزرو غیرفعال باقی می‌ماند |
| 7a | مشتری ساعتی انتخاب نمی‌کند | دکمه رزرو غیرفعال باقی می‌ماند |
| 9a | خطا در ذخیره‌سازی | پیام خطا نمایش داده می‌شود |

---

### ۱.۴.۲ سناریو ۲: مشاهده خدمات توسط مشتری

| عنصر | توضیح |
|------|-------|
| **نام Use Case** | مشاهده خدمات (View Services) |
| **Actor اصلی** | مشتری |
| **ذینفعان و علایق** | مشتری: آگاهی از خدمات و قیمت‌ها / آرایشگاه: معرفی خدمات |
| **پیش‌شرط** | سیستم در دسترس و خدمات در پایگاه داده موجود هستند |
| **پس‌شرط موفق** | لیست کامل خدمات با جزئیات نمایش داده می‌شود |

**سناریو اصلی:**

| مرحله | Actor | سیستم |
|-------|-------|-------|
| ۱ | مشتری روی لینک «خدمات» کلیک می‌کند | - |
| ۲ | - | سیستم لیست خدمات را از IndexedDB می‌خواند |
| ۳ | - | کارت‌های خدمات با نام، توضیح، قیمت و مدت زمان نمایش داده می‌شوند |
| ۴ | مشتری روی یک خدمت کلیک می‌کند | جزئیات بیشتر نمایش داده می‌شود |

**سناریوهای جایگزین:**

| شماره | شرط | اقدام |
|-------|-----|-------|
| 2a | خدماتی در پایگاه داده نیست | پیام «خدماتی یافت نشد» نمایش داده می‌شود |
| 3a | خطا در بارگذاری | پیام خطا نمایش داده می‌شود |

---

### ۱.۴.۳ سناریو ۳: افزودن خدمت جدید توسط مدیر

| عنصر | توضیح |
|------|-------|
| **نام Use Case** | افزودن خدمت (Add Service) |
| **Actor اصلی** | مدیر |
| **ذینفعان و علایق** | مدیر: به‌روزرسانی کاتالوگ خدمات / مشتریان: دسترسی به خدمات جدید |
| **پیش‌شرط** | مدیر وارد سیستم شده است |
| **پس‌شرط موفق** | خدمت جدید در پایگاه داده ذخیره و در لیست نمایش داده می‌شود |

**سناریو اصلی:**

| مرحله | Actor | سیستم |
|-------|-------|-------|
| ۱ | مدیر تابع addService را فراخوانی می‌کند | - |
| ۲ | مدیر اطلاعات خدمت را وارد می‌کند (نام، دسته‌بندی، توضیح، قیمت، مدت) | - |
| ۳ | - | سیستم داده‌ها را اعتبارسنجی می‌کند |
| ۴ | - | سیستم خدمت را در IndexedDB ذخیره می‌کند |
| ۵ | - | پیام «خدمت جدید اضافه شد» نمایش داده می‌شود |
| ۶ | - | لیست خدمات به‌روز می‌شود |

**سناریوهای جایگزین:**

| شماره | شرط | اقدام |
|-------|-----|-------|
| 3a | داده‌ها ناقص هستند | پیام خطای اعتبارسنجی نمایش داده می‌شود |
| 4a | خطا در ذخیره‌سازی | پیام «خطا در افزودن خدمت» نمایش داده می‌شود |

---

# فصل ۲: نمودارهای UML

## ۲.۱ نمودار Use Case

### توضیح نمودار
نمودار Use Case نشان‌دهنده تعاملات بین Actor‌ها و سیستم است. در این نمودار، سه Actor اصلی (مشتری، مدیر، آرایشگر) و ۷ Use Case اصلی نمایش داده شده‌اند.

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          سیستم مدیریت آرایشگاه                               │
│                                                                             │
│    ┌──────────────┐                                    ┌──────────────────┐ │
│    │  مشاهده      │                                    │   افزودن         │ │
│    │  خدمات       │◄────────────────────────┐          │   خدمت جدید      │ │
│    └──────────────┘                         │          └────────▲─────────┘ │
│           ▲                                 │                   │           │
│           │                                 │                   │           │
│    ┌──────┴───────┐     ┌──────────────┐   │          ┌────────┴─────────┐ │
│    │  مشاهده      │     │   رزرو       │   │          │   افزودن         │ │
│    │  آرایشگران   │     │   نوبت       │   │          │   آرایشگر جدید   │ │
│    └──────────────┘     └──────▲───────┘   │          └────────▲─────────┘ │
│           ▲                    │           │                   │           │
│           │                    │           │                   │           │
└───────────┼────────────────────┼───────────┼───────────────────┼───────────┘
            │                    │           │                   │
            │                    │           │                   │
     ┌──────┴──────┐      ┌──────┴──────┐   │           ┌───────┴───────┐
     │             │      │             │   │           │               │
     │   مشتری     │      │   مشتری     │   └───────────│     مدیر      │
     │  (Customer) │      │  (Customer) │               │    (Admin)    │
     └─────────────┘      └─────────────┘               └───────────────┘
```

### Use Cases:

| شماره | نام Use Case | Actor | توضیح |
|-------|-------------|-------|-------|
| UC-01 | رزرو نوبت | مشتری | ثبت نوبت جدید با انتخاب خدمت، آرایشگر و زمان |
| UC-02 | مشاهده خدمات | مشتری | مشاهده لیست خدمات با قیمت و مدت |
| UC-03 | مشاهده آرایشگران | مشتری | مشاهده پروفایل آرایشگران |
| UC-04 | لغو نوبت | مشتری/مدیر | لغو نوبت رزرو شده |
| UC-05 | افزودن خدمت | مدیر | افزودن خدمت جدید به کاتالوگ |
| UC-06 | افزودن آرایشگر | مدیر | افزودن آرایشگر جدید |
| UC-07 | مشاهده نوبت‌ها | آرایشگر | مشاهده برنامه کاری روزانه |

---

## ۲.۲ نمودار Class

### توضیح نمودار
نمودار Class ساختار کلاس‌های سیستم و روابط بین آن‌ها را نشان می‌دهد. این نمودار شامل ۱۲ کلاس اصلی با روابط Association، Composition و Inheritance است.

```
┌────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                        │
│  ┌─────────────────────┐          ┌─────────────────────┐                              │
│  │    <<interface>>    │          │    <<interface>>    │                              │
│  │   DatabaseService   │          │      IEntity        │                              │
│  ├─────────────────────┤          ├─────────────────────┤                              │
│  │ +create(data)       │          │ +id: number         │                              │
│  │ +getAll()           │          │ +createdAt: Date    │                              │
│  │ +getById(id)        │          └─────────────────────┘                              │
│  │ +update(id, data)   │                    △                                          │
│  │ +delete(id)         │                    │                                          │
│  └─────────────────────┘                    │                                          │
│            △                                │                                          │
│            │                 ┌──────────────┼──────────────────┐                       │
│            │                 │              │                  │                       │
│  ┌─────────┴──────────┐ ┌────┴────────┐ ┌───┴─────────┐ ┌──────┴────────┐              │
│  │AppointmentService  │ │  Service    │ │   Staff     │ │  Appointment  │              │
│  ├────────────────────┤ ├─────────────┤ ├─────────────┤ ├───────────────┤              │
│  │                    │ │-id: number  │ │-id: number  │ │-id: number    │              │
│  │+create()           │ │-name: string│ │-name: string│ │-customerName  │              │
│  │+getByDate()        │ │-category    │ │-role: string│ │-customerEmail │              │
│  │+getByStaff()       │ │-description │ │-specialties │ │-customerPhone │              │
│  │+updateStatus()     │ │-price: num  │ │-experience  │ │-serviceId     │              │
│  │+isTimeSlotAvail()  │ │-duration    │ │-bio: string │ │-staffId       │              │
│  └────────────────────┘ └─────────────┘ └─────────────┘ │-date: Date    │              │
│                                │              │         │-time: string  │              │
│                                │              │         │-status        │              │
│                                │              │         └───────────────┘              │
│                                │              │                 │                      │
│                                │              │                 │                      │
│                                ▼              ▼                 ▼                      │
│                         ┌─────────────────────────────────────────────┐                │
│                         │              Database (Dexie)               │                │
│                         ├─────────────────────────────────────────────┤                │
│                         │ -services: Table<Service>                   │                │
│                         │ -staff: Table<Staff>                        │                │
│                         │ -appointments: Table<Appointment>           │                │
│                         │ -customers: Table<Customer>                 │                │
│                         ├─────────────────────────────────────────────┤                │
│                         │ +seedDatabase()                             │                │
│                         └─────────────────────────────────────────────┘                │
│                                                                                        │
│  ┌─────────────────────┐     ┌────────────────────┐     ┌──────────────────┐           │
│  │     AppContext      │     │     Component      │     │    Customer      │           │
│  ├─────────────────────┤     ├────────────────────┤     ├──────────────────┤           │
│  │-services: Service[] │◆────│ <<abstract>>       │     │-id: number       │           │
│  │-staff: Staff[]      │     │-props              │     │-name: string     │           │
│  │-appointments        │     │-state              │     │-email: string    │           │
│  ├─────────────────────┤     ├────────────────────┤     │-phone: string    │           │
│  │+createAppointment() │     │+render()           │     └──────────────────┘           │
│  │+cancelAppointment() │     └────────────────────┘                                    │
│  │+addService()        │              △                                                │
│  │+addStaff()          │              │                                                │
│  └─────────────────────┘     ┌────────┴────────────────────────────┐                   │
│                              │        │           │                │                   │
│                    ┌─────────┴──┐ ┌───┴────┐ ┌────┴─────┐ ┌────────┴──┐                │
│                    │   Header   │ │ Hero   │ │ Services │ │  Booking  │                │
│                    ├────────────┤ ├────────┤ ├──────────┤ ├───────────┤                │
│                    │-scrolled   │ │        │ │-services │ │-formData  │                │
│                    │-menuOpen   │ │        │ │          │ │-submitting│                │
│                    └────────────┘ └────────┘ └──────────┘ └───────────┘                │
│                                                                                        │
└────────────────────────────────────────────────────────────────────────────────────────┘
```

### لیست کلاس‌ها:

| شماره | نام کلاس | نوع | مسئولیت |
|-------|----------|-----|---------|
| 1 | Database | Core | مدیریت اتصال به IndexedDB |
| 2 | Service | Entity | نگهداری اطلاعات خدمات |
| 3 | Staff | Entity | نگهداری اطلاعات آرایشگران |
| 4 | Appointment | Entity | نگهداری اطلاعات نوبت‌ها |
| 5 | Customer | Entity | نگهداری اطلاعات مشتریان |
| 6 | AppointmentService | Service | عملیات CRUD برای نوبت‌ها |
| 7 | ServiceService | Service | عملیات CRUD برای خدمات |
| 8 | StaffService | Service | عملیات CRUD برای آرایشگران |
| 9 | AppContext | Context | مدیریت state سراسری |
| 10 | Header | Component | نمایش منوی ناوبری |
| 11 | Services | Component | نمایش لیست خدمات |
| 12 | Booking | Component | فرم رزرو نوبت |

### روابط:
- **Composition (◆)**: AppContext شامل آرایه‌های Service, Staff, Appointment است
- **Inheritance (△)**: کامپوننت‌ها از Component ارث‌بری می‌کنند
- **Dependency (-->)**: سرویس‌ها به Database وابسته هستند

---

## ۲.۳ نمودار Sequence

### ۲.۳.۱ Sequence Diagram: رزرو نوبت

```
┌─────────┐     ┌─────────────┐     ┌──────────────┐     ┌────────────────────┐     ┌──────────┐
│ مشتری   │     │   Booking   │     │  AppContext  │     │ AppointmentService │     │ Database │
│(Customer)│    │  Component  │     │              │     │                    │     │(IndexedDB)│
└────┬─────┘    └──────┬──────┘     └──────┬───────┘     └─────────┬──────────┘     └─────┬────┘
     │                 │                   │                       │                      │
     │ 1. باز کردن صفحه│                   │                       │                      │
     │ ────────────────>                   │                       │                      │
     │                 │                   │                       │                      │
     │                 │ 2. useApp()       │                       │                      │
     │                 │ ──────────────────>                       │                      │
     │                 │                   │                       │                      │
     │                 │ 3. services, staff│                       │                      │
     │                 │ <──────────────────                       │                      │
     │                 │                   │                       │                      │
     │ 4. پر کردن فرم  │                   │                       │                      │
     │ ────────────────>                   │                       │                      │
     │                 │                   │                       │                      │
     │                 │ 5. handleChange() │                       │                      │
     │                 │ ─────────┐        │                       │                      │
     │                 │          │        │                       │                      │
     │                 │ <────────┘        │                       │                      │
     │                 │  setState         │                       │                      │
     │                 │                   │                       │                      │
     │ 6. کلیک روی     │                   │                       │                      │
     │   «تأیید و رزرو»│                   │                       │                      │
     │ ────────────────>                   │                       │                      │
     │                 │                   │                       │                      │
     │                 │ 7. handleSubmit() │                       │                      │
     │                 │ ─────────┐        │                       │                      │
     │                 │          │        │                       │                      │
     │                 │ <────────┘        │                       │                      │
     │                 │                   │                       │                      │
     │                 │ 8. createAppointment(data)                │                      │
     │                 │ ──────────────────>                       │                      │
     │                 │                   │                       │                      │
     │                 │                   │ 9. create(data)       │                      │
     │                 │                   │ ──────────────────────>                      │
     │                 │                   │                       │                      │
     │                 │                   │                       │ 10. add(appointment) │
     │                 │                   │                       │ ─────────────────────>
     │                 │                   │                       │                      │
     │                 │                   │                       │ 11. id               │
     │                 │                   │                       │ <─────────────────────
     │                 │                   │                       │                      │
     │                 │                   │ 12. id                │                      │
     │                 │                   │ <──────────────────────                      │
     │                 │                   │                       │                      │
     │                 │                   │ 13. showNotification()│                      │
     │                 │                   │ ─────────┐            │                      │
     │                 │                   │          │            │                      │
     │                 │                   │ <────────┘            │                      │
     │                 │                   │                       │                      │
     │                 │ 14. success: true │                       │                      │
     │                 │ <──────────────────                       │                      │
     │                 │                   │                       │                      │
     │ 15. نمایش پیام  │                   │                       │                      │
     │    «نوبت ثبت شد»│                   │                       │                      │
     │ <────────────────                   │                       │                      │
     │                 │                   │                       │                      │
```

---

### ۲.۳.۲ Sequence Diagram: مشاهده خدمات

```
┌─────────┐     ┌──────────┐     ┌──────────────┐     ┌────────────────┐     ┌──────────┐
│ مشتری   │     │ Services │     │  AppContext  │     │ ServiceService │     │ Database │
│(Customer)│    │Component │     │              │     │                │     │(IndexedDB)│
└────┬─────┘    └────┬─────┘     └──────┬───────┘     └───────┬────────┘     └─────┬────┘
     │               │                  │                     │                    │
     │ 1. کلیک روی   │                  │                     │                    │
     │   منوی خدمات  │                  │                     │                    │
     │ ──────────────>                  │                     │                    │
     │               │                  │                     │                    │
     │               │ 2. useApp()      │                     │                    │
     │               │ ─────────────────>                     │                    │
     │               │                  │                     │                    │
     │               │                  │ 3. useLiveQuery()   │                    │
     │               │                  │ ────────────────────>                    │
     │               │                  │                     │                    │
     │               │                  │                     │ 4. toArray()       │
     │               │                  │                     │ ───────────────────>
     │               │                  │                     │                    │
     │               │                  │                     │ 5. services[]      │
     │               │                  │                     │ <───────────────────
     │               │                  │                     │                    │
     │               │                  │ 6. services[]       │                    │
     │               │                  │ <────────────────────                    │
     │               │                  │                     │                    │
     │               │ 7. services      │                     │                    │
     │               │ <─────────────────                     │                    │
     │               │                  │                     │                    │
     │               │ 8. render()      │                     │                    │
     │               │ ───────┐         │                     │                    │
     │               │        │         │                     │                    │
     │               │ <──────┘         │                     │                    │
     │               │   map(services)  │                     │                    │
     │               │                  │                     │                    │
     │ 9. نمایش کارت│                  │                     │                    │
     │   خدمات       │                  │                     │                    │
     │ <──────────────                  │                     │                    │
     │               │                  │                     │                    │
```

---

## ۲.۴ نمودار Activity

### ۲.۴.۱ Activity Diagram: فرایند رزرو نوبت

```
                              ┌─────────────────┐
                              │     شروع        │
                              │       ●         │
                              └────────┬────────┘
                                       │
                                       ▼
                              ┌─────────────────┐
                              │  باز کردن صفحه  │
                              │     رزرو        │
                              └────────┬────────┘
                                       │
                                       ▼
                              ┌─────────────────┐
                              │  بارگذاری لیست │
                              │ خدمات و آرایشگران│
                              └────────┬────────┘
                                       │
                                       ▼
                              ┌─────────────────┐
                              │ وارد کردن نام و │
                              │    ایمیل        │
                              └────────┬────────┘
                                       │
                                       ▼
                         ┌─────────────────────────┐
                         │   آیا اطلاعات معتبر است؟ │
                         │           ◇             │
                         └────────────┬────────────┘
                                 │         │
                          بله    │         │  خیر
                                 │         │
                                 ▼         ▼
                   ┌───────────────┐   ┌───────────────┐
                   │ انتخاب خدمت  │   │ نمایش خطا    │
                   └───────┬───────┘   └───────┬───────┘
                           │                   │
                           │                   ▼
                           │           ┌───────────────┐
                           │           │ بازگشت به    │
                           │           │ فرم          │◄─────────────┐
                           ▼           └───────────────┘             │
                   ┌───────────────┐                                 │
                   │ انتخاب       │                                 │
                   │ آرایشگر      │                                 │
                   └───────┬───────┘                                 │
                           │                                         │
                           ▼                                         │
                   ┌───────────────┐                                 │
                   │ انتخاب تاریخ │                                 │
                   └───────┬───────┘                                 │
                           │                                         │
                           ▼                                         │
                   ┌───────────────┐                                 │
                   │ انتخاب ساعت  │                                 │
                   └───────┬───────┘                                 │
                           │                                         │
                           ▼                                         │
                   ┌───────────────┐                                 │
                   │ کلیک روی     │                                 │
                   │«تأیید و رزرو»│                                 │
                   └───────┬───────┘                                 │
                           │                                         │
                           ▼                                         │
              ┌─────────────────────────┐                            │
              │ آیا همه فیلدها پر است؟  │                            │
              │           ◇             │                            │
              └────────────┬────────────┘                            │
                      │         │                                    │
               بله    │         │  خیر                               │
                      │         └────────────────────────────────────┘
                      ▼
              ┌───────────────┐
              │ ذخیره نوبت   │
              │ در IndexedDB │
              └───────┬───────┘
                      │
                      ▼
         ┌─────────────────────────┐
         │   آیا ذخیره موفق بود؟   │
         │           ◇             │
         └────────────┬────────────┘
                 │         │
          بله    │         │  خیر
                 │         │
                 ▼         ▼
         ┌─────────────┐ ┌───────────────┐
         │ نمایش پیام │ │ نمایش پیام   │
         │ موفقیت     │ │ خطا          │
         └──────┬──────┘ └───────┬───────┘
                │                │
                ▼                ▼
         ┌─────────────────────────────┐
         │           پایان             │
         │             ◉               │
         └─────────────────────────────┘
```

---

### ۲.۴.۲ Activity Diagram: فرایند بارگذاری داده‌های اولیه

```
                              ┌─────────────────┐
                              │     شروع        │
                              │       ●         │
                              └────────┬────────┘
                                       │
                                       ▼
                              ┌─────────────────┐
                              │ اتصال به       │
                              │ IndexedDB      │
                              └────────┬────────┘
                                       │
                                       ▼
                         ┌─────────────────────────┐
                         │ آیا اتصال برقرار شد؟   │
                         │           ◇             │
                         └────────────┬────────────┘
                                 │         │
                          بله    │         │  خیر
                                 │         │
                                 ▼         ▼
                   ┌───────────────┐   ┌───────────────┐
                   │ شمارش تعداد  │   │ نمایش خطا    │
                   │ خدمات موجود  │   │ اتصال        │
                   └───────┬───────┘   └───────┬───────┘
                           │                   │
                           ▼                   ▼
              ┌─────────────────────────┐     ◉
              │   آیا خدماتی موجود است؟ │
              │           ◇             │
              └────────────┬────────────┘
                      │         │
               خیر    │         │  بله
                      │         │
                      ▼         ▼
              ┌───────────────┐ ┌───────────────┐
              │ seed خدمات   │ │ ادامه بدون   │
              │ پیش‌فرض      │ │ seed          │
              └───────┬───────┘ └───────┬───────┘
                      │                 │
                      ▼                 │
              ┌───────────────┐         │
              │ seed کارکنان │         │
              │ پیش‌فرض      │         │
              └───────┬───────┘         │
                      │                 │
                      ▼                 │
              ┌───────────────┐         │
              │ بارگذاری     │◄────────┘
              │ کامپوننت‌ها   │
              └───────┬───────┘
                      │
                      ▼
              ┌───────────────┐
              │ تنظیم loading │
              │ = false       │
              └───────┬───────┘
                      │
                      ▼
              ┌─────────────────┐
              │     پایان      │
              │       ◉        │
              └─────────────────┘
```

---

## ۲.۵ نمودار State

### ۲.۵.۱ State Diagram: وضعیت نوبت (Appointment)

```
                                   ┌─────────────────┐
                          create() │                 │
                 ─────────────────>│    pending      │
                                   │   (در انتظار)   │
                                   └────────┬────────┘
                                            │
                              ┌─────────────┼─────────────┐
                              │             │             │
                    confirm() │   cancel()  │             │ timeout
                              ▼             ▼             ▼
                   ┌──────────────┐ ┌──────────────┐ ┌──────────────┐
                   │  confirmed   │ │  cancelled   │ │   expired    │
                   │  (تأیید شده) │ │  (لغو شده)   │ │ (منقضی شده) │
                   └──────┬───────┘ └──────────────┘ └──────────────┘
                          │                 │                │
                          │ complete()      │                │
                          ▼                 │                │
                   ┌──────────────┐         │                │
                   │  completed   │         │                │
                   │ (انجام شده) │         │                │
                   └──────────────┘         │                │
                          │                 │                │
                          │                 │                │
                          ▼                 ▼                ▼
                   ┌─────────────────────────────────────────────┐
                   │                    پایان                    │
                   │                      ◉                      │
                   └─────────────────────────────────────────────┘
```

**توضیح وضعیت‌ها:**

| وضعیت | توضیح | انتقال‌های ممکن |
|-------|-------|----------------|
| pending | نوبت ثبت شده اما تأیید نشده | confirmed, cancelled, expired |
| confirmed | نوبت توسط سیستم یا مدیر تأیید شده | completed, cancelled |
| cancelled | نوبت توسط مشتری یا مدیر لغو شده | - (پایان) |
| completed | خدمت انجام شده | - (پایان) |
| expired | زمان نوبت گذشته بدون انجام | - (پایان) |

---

### ۲.۵.۲ State Diagram: وضعیت فرم رزرو (Booking Form)

```
                                   ┌─────────────────┐
                       pageLoad()  │                 │
                 ─────────────────>│     empty       │
                                   │    (خالی)       │
                                   └────────┬────────┘
                                            │
                                   input()  │
                                            ▼
                                   ┌─────────────────┐
                                   │    filling      │
                                   │ (در حال پر کردن)│
                                   └────────┬────────┘
                                            │
                              ┌─────────────┼─────────────┐
                              │             │             │
                   validate() │             │ reset()     │
                   success    │             │             │
                              ▼             │             ▼
                   ┌──────────────┐         │   ┌──────────────┐
                   │    valid     │         │   │    empty     │
                   │   (معتبر)    │         │   │   (خالی)     │
                   └──────┬───────┘         │   └──────────────┘
                          │                 │
                          │ submit()        │
                          ▼                 │
                   ┌──────────────┐         │
                   │  submitting  │         │
                   │ (در حال ارسال)│        │
                   └──────┬───────┘         │
                          │                 │
              ┌───────────┼───────────┐     │
              │           │           │     │
     success  │           │ error     │     │
              ▼           ▼           │     │
   ┌──────────────┐ ┌──────────────┐ │     │
   │   success    │ │    error     │ │     │
   │  (موفق)      │ │   (خطا)      │ │     │
   └──────┬───────┘ └──────┬───────┘ │     │
          │                │         │     │
          │ reset()        │ retry() │     │
          │                │         │     │
          ▼                ▼         │     │
   ┌──────────────────────────────┐ │     │
   │           empty              │◄┘     │
   │          (خالی)              │◄──────┘
   └──────────────────────────────┘
```

**توضیح وضعیت‌ها:**

| وضعیت | توضیح | رویدادها |
|-------|-------|----------|
| empty | فرم خالی است | input() → filling |
| filling | کاربر در حال پر کردن فرم است | validate() → valid, reset() → empty |
| valid | تمام فیلدها معتبر هستند | submit() → submitting |
| submitting | در حال ارسال به سرور | success → success, error → error |
| success | رزرو با موفقیت انجام شد | reset() → empty |
| error | خطا در رزرو | retry() → submitting, reset() → empty |

---

# پیوست‌ها

## پ.۱ فناوری‌های استفاده شده

| فناوری | نسخه | کاربرد |
|--------|------|--------|
| React | 18.2 | فریم‌ورک فرانت‌اند |
| Vite | 5.0 | ابزار Build |
| Dexie.js | 3.2 | کتابخانه IndexedDB |
| React Router | 6.21 | مسیریابی |
| CSS3 | - | استایل‌دهی |

## پ.۲ ساختار پروژه

```
src/
├── components/        ← کامپوننت‌های UI
│   ├── Header/
│   ├── Hero/
│   ├── Services/
│   ├── Staff/
│   ├── Booking/
│   ├── Contact/
│   └── Footer/
├── context/           ← مدیریت State
│   └── AppContext.jsx
├── db/                ← لایه داده
│   ├── database.js
│   └── services/
├── pages/             ← صفحات
└── index.css          ← استایل‌ها
```

---

**تهیه کننده:** [نام دانشجو]  
**شماره دانشجویی:** [شماره دانشجویی]  
**تاریخ تحویل:** دی ۱۴۰۳
